---
layout: single
title:  "단방향 연관관계 매핑"
toc: true
toc_sticky: true
toc_label: "목차"
---

# 1. 다대일 단방향 연관관계

1. ‘다’가 주인인경우
    
  단방향 연관관계 포스트의 내용이다.
    
2. ‘일’쪽이 주인 엔티티가 되는경우
    
  Member의 엔티티
  
  ```java
  @Entity
  public class Member {
    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String name;
  }
  ```
  
  Team의 엔티티
  
  ```java
  @Entity
  public class Team {
    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    private Long TeamId;
    private String TeamName;
    
    @OneToMany
    @JoinColumn(name = "TeamId")
    private List<Member> members = new ArrayList<Member>();
  }
  ```
  
  - Member테이블에 TeadId가 외래키로 Create된다.
  - Team객체에서 members 필드를 수정하면 Member테이블의 TeamId를 수정하기 위해 Update 쿼리가 날라간다.

# 2. 다대일 양방향 연관관계

1. ‘일’쪽이 주인 엔티티가 되는경우
    
  억지로 만든다.
  
  잘 쓰지 않는다.
  
  Member의 엔티티
  
  ```java
  @Entity
  public class Member {
    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String name;

    @ManyToOne
    @JoinColumn(insertable = false,updatable = false)
    private Team team;
  }
  ```
  
  - 억지로 읽기 전용(삽입, 수정 안됨) 으로 만들어 주인이 안되게 만든다.
  
  Team 엔티티
  
  ```java
  @Entity
  public class Team {
    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    private Long TeamId;
    private String TeamName;
    
    @OneToMany
    @JoinColumn(name = "TeamId")
    private List<Member> members = new ArrayList<Member>();
  }
  ```
    
2. ‘다’가 주인 엔티티가 되는경우
    
  양방향 연관관계 포스팅에서 설명함…
    

# 3. 일대일 단방향 연관관계

다대일 단반향 연관관계와 비슷

주인이 바뀌면 어노테이션만 바꾸면 된다.

1. 주인 테이블에 외래키가 있는 경우
    
  Member의 엔티티(주인)
  
  ```java
  @Entity
  public class Member {
    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String name;

    @OneToOne
    @JoinColumn(name = "LockerId")
    private Locker locker;
  }
  ```
  
  Locker의 엔티티
  
  ```java
  @Entity
  public class Locker {
    @Id @GeneratedValue
    private Long LockerId;

    private String name;
  }
  ```
    
2. 대상 테이블에 외래키가 있는 경우
    
  JPA가 지원하지 않는다!!
  
  주인테이블에서 수정하는데, ??????????????
  

# 5. 일대일 양방향 연관관계